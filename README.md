# Credit Risk Model

A production-ready machine learning project for credit scoring based on customer transaction data. Exposes a REST API using FastAPI. Includes advanced feature engineering, robust testing, and regulatory-compliant documentation.

## Project Structure

```
credit-risk-model/
├── .github/workflows/ci.yml   # GitHub Actions for CI/CD
├── data/                      # Raw and processed data (add to .gitignore)
│   ├── raw/
│   └── processed/
├── notebooks/
│   ├── 1.0-eda.ipynb         # Exploratory Data Analysis (EDA)
│   └── 4.0-proxy-target-variable-engineering.ipynb # Proxy target engineering
├── src/
│   ├── __init__.py
│   ├── data_processing.py     # Data processing and pipeline
│   ├── feature_engineering.py # Advanced feature engineering (RFM, WOE, etc.)
│   ├── run_feature_engineering.py # Pipeline runner
│   ├── train.py               # Model training script (Logistic Regression, Random Forest, etc.)
│   ├── predict.py             # Model inference using joblib
│   └── api/
│       ├── main.py            # FastAPI app with /predict-risk endpoint
│       └── pydantic_models.py # Request/response schemas
├── tests/
│   ├── test_data_processing.py    # Unit tests for data processing
│   └── test_feature_engineering.py # Unit tests for feature engineering
├── models/                   # Trained model storage
├── Dockerfile
├── docker-compose.yml
├── requirements.txt
├── .gitignore
├── FEATURE_ENGINEERING_README.md  # Detailed feature engineering documentation
└── README.md
```

## Business Context & Regulatory Requirements

This project is designed to meet the requirements of the Basel II Capital Accord, emphasizing risk quantification, model validation, documentation, and interpretability. In the absence of direct default labels, proxy variables are engineered from behavioral and transactional data, with careful consideration of business risks and regulatory scrutiny.

## Technical Progress

### Exploratory Data Analysis (EDA)
- Analyzed 95,662 transactions with 16 features (no missing values, consistent types).
- Identified strong temporal patterns, customer segments, and outlier behaviors.

### Feature Engineering Pipeline
- **Aggregate Features**: RFM (Recency, Frequency, Monetary), customer-level stats.
- **Temporal Features**: Hour, day, week, cyclical encoding, business hours, etc.
- **Categorical Encoding**: WOE, IV, target, label, and one-hot encoding.
- **Missing Value Handling**: Imputation strategies (mean, KNN, etc.).
- **Scaling**: Standard, MinMax, and robust scaling.
- **Feature Selection**: Automated selection of top predictive features.

### Proxy Target Variable Engineering
- Created multi-dimensional proxies (payment delays, RFM segments, behavioral clusters).
- Validated proxy-target relationships statistically.

### Model Training & Experiment Tracking
- Baseline models: Logistic Regression, Random Forest, Gradient Boosting.
- MLflow integrated for experiment tracking and model registry.
- Performance metrics: AUC, KS, Gini coefficient.
- Hyperparameter tuning and cross-validation implemented.

### Testing & CI/CD
- Comprehensive unit tests for all pipeline components.
- Automated CI/CD with GitHub Actions.
- Dockerized for reproducible deployment.

## How to Run

### 1. Build and start the API using Docker Compose

```bash
cd credit-risk-model
# Build and start the service
docker-compose up --build
```

The API will be available at `http://localhost:8000`.

### 2. Example: Predict Credit Risk

Send a POST request to `/predict-risk`:

```json
{
  "recency_days": 10,
  "frequency": 5,
  "monetary": 1200.50
}
```

Example using `curl`:

```bash
curl -X POST "http://localhost:8000/predict-risk" \
     -H "Content-Type: application/json" \
     -d '{"recency_days": 10, "frequency": 5, "monetary": 1200.50}'
```

Response:
```json
{
  "risk_score": 0.23
}
```

## Testing

Run unit tests with:
```bash
pytest
```

## Documentation
- **Feature Engineering**: See `FEATURE_ENGINEERING_README.md` for pipeline details.
- **API Docs**: Auto-generated by FastAPI at `/docs` when running the API.

## Professional Standards
- Modular, well-documented codebase
- Regulatory-compliant, interpretable models
- Comprehensive testing and CI/CD
- All interim reports and local artifacts are excluded from version control

## License
MIT 